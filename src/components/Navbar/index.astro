---
import { Image } from "astro:assets";
import "./styles.css";
---

<header id="cs-navigation">
  <div class="cs-container">
    <a href="/fitbase/" class="cs-logo" aria-label="back to home">
      <Image src="/fitbase/logo.webp" alt="Fitbase Logo" aria-hidden="true" decoding="async" loading="lazy"  width={200} height={50} />
    </a>
    <nav class="cs-nav" role="navigation">
      <button class="cs-toggle" aria-label="mobile menu toggle">
        <div class="cs-box" aria-hidden="true">
          <span class="cs-line cs-line1" aria-hidden="true"></span>
          <span class="cs-line cs-line2" aria-hidden="true"></span>
          <span class="cs-line cs-line3" aria-hidden="true"></span>
        </div>
      </button>
      <div class="cs-ul-wrapper">
        <ul id="cs-expanded" class="cs-ul" aria-expanded="false">
          <li class="cs-li">
            <a href="/fitbase/#hero" class="cs-li-link cs-active">Home</a>
          </li>
          <li class="cs-li">
            <a href="/fitbase/#about" class="cs-li-link"> About </a>
          </li>
          <li class="cs-li">
            <a href="/fitbase/#process" class="cs-li-link"> Process </a>
          </li>
          <li class="cs-li">
            <a href="/fitbase/#faq" class="cs-li-link"> FAQ </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>

<script>
  var CSbody = document.querySelector('body');
  const CSnavbarMenu = document.querySelector('#cs-navigation');
  const CShamburgerMenu = document.querySelector('#cs-navigation .cs-toggle');

  CShamburgerMenu?.addEventListener('click', function () {
    CShamburgerMenu.classList.toggle('cs-active');
    CSnavbarMenu?.classList.toggle('cs-active');
    CSbody?.classList.toggle('cs-open');
    ariaExpanded();
  });

  function ariaExpanded() {
    const csUL = document.querySelector('#cs-expanded');
    const csExpanded = csUL?.getAttribute('aria-expanded');

    if (csExpanded === 'false') {
      csUL?.setAttribute('aria-expanded', 'true');
    } else {
      csUL?.setAttribute('aria-expanded', 'false');
    }
  }

  const dropDowns = Array.from(document.querySelectorAll('#cs-navigation .cs-dropdown'));
  for (const item of dropDowns) {
    const onClick = () => {
      item.classList.toggle('cs-active');
    };
    item.addEventListener('click', onClick);
  }

  const csLiLinks = Array.from(document.querySelectorAll('#cs-navigation .cs-li-link'));
  for (const item of csLiLinks) {
    const onClick = () => {
      csLiLinks.forEach((el) => {
        el.classList.remove('cs-active');
      });
      item.classList.add('cs-active');
    };
    item.addEventListener('click', onClick);
  }
</script>
